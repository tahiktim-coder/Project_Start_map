<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJECT STAR MAP</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">
    <!-- Styles -->
    <link rel="stylesheet" href="style.css?v=3">
</head>

<body>
    <div class="app-container">
        <!-- background visuals (scanlines, vignette) -->
        <div class="crt-overlay"></div>
        <div class="vignette"></div>

        <!-- Header: Ship Status -->
        <header class="status-bar" id="ui-header">
            <div class="ship-info">
                <span class="vessel-name">VESSEL: EXODUS-9</span>
                <span class="sector-name" id="sector-name" style="color: var(--color-accent); font-size: 0.85em;">/// SECTOR 1: THE GRAVEYARD</span>
                <span class="date" id="game-date">DATE: 2342.05.12</span>
            </div>
            <div class="resource-cluster">
                <div class="res-item"><label>ENERGY</label><span id="res-energy">100%</span></div>
                <div class="res-item"><label>SALVAGE</label><span id="res-salvage">50</span></div>
                <div class="res-item"><label>RATIONS</label><span id="res-rations">20</span></div>
                <div class="res-item" title="Data from failed colonies. Improves your colony's survival chance."><label>DATA</label><span id="res-knowledge">0</span></div>
            </div>
            <!-- Testing Mode Button (Dev) - near Audio -->
            <button id="btn-testing" class="clickable" style="
                position: absolute; top: 8px; right: 110px;
                background: #000; border: 1px solid #ff6600;
                color: #ff6600; font-family: var(--font-mono);
                padding: 2px 10px; font-size: 0.8em; cursor: pointer; z-index: 100;
                opacity: 0.7;
            ">TEST</button>
            <!-- Audio Toggle Button -->
            <button id="btn-audio" class="clickable" style="
                position: absolute;
                top: 8px;
                right: 20px;
                background: #000;
                border: 1px solid var(--color-primary-dim);
                color: var(--color-primary-dim);
                font-family: var(--font-mono);
                padding: 2px 10px;
                font-size: 0.8em;
                cursor: pointer;
                z-index: 100;
                opacity: 0.5;
            ">â™ª AUDIO</button>
        </header>

        <!-- Left Panel: Ship Schematic -->
        <aside class="left-panel" id="left-panel">
            <div class="panel-header">/// SHIP SCHEMATIC</div>
            <div class="panel-content" id="ship-schematic">
                <div class="ship-hull">
                    <!-- Deck 1: Bridge (Navigation) -->
                    <div class="ship-deck deck-bridge" data-room="bridge">
                        <div class="deck-label">BRIDGE</div>
                        <div class="deck-sub">NAV / COMMS</div>
                    </div>

                    <!-- Deck 2: Lab (Science) -->
                    <div class="ship-deck deck-lab" data-room="lab">
                        <div class="deck-label">LABORATORY</div>
                        <div class="deck-sub">SCAN / BIO</div>
                    </div>

                    <!-- Deck 3: Quarters (Rest / Morgue) -->
                    <div class="ship-deck deck-quarters" data-room="quarters">
                        <div class="deck-label">CREW QUARTERS</div>
                        <div class="deck-sub">REST / MORGUE</div>
                        <div class="deck-crew-status" id="deck-crew-status">
                            <!-- Dynamically populated with crew indicators -->
                        </div>
                    </div>

                    <!-- Deck 4: Cargo (Storage) -->
                    <div class="ship-deck deck-cargo" data-room="cargo">
                        <div class="deck-label">CARGO HOLD</div>
                        <div class="deck-sub">SALVAGE / STORAGE</div>
                    </div>

                    <!-- Deck 5: Engineering (Hardware) -->
                    <div class="ship-deck deck-engineering" data-room="engineering">
                        <div class="deck-label">ENGINEERING</div>
                        <div class="deck-sub">PROBES / DRIVES</div>
                    </div>

                    <!-- Deck 6: Upgrades (Ship Improvements) -->
                    <div class="ship-deck deck-upgrades" data-room="upgrades" id="btn-fab">
                        <div class="deck-label">FABRICATION</div>
                        <div class="deck-sub">UPGRADES</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area (Star Map or Planet View) -->
        <main class="main-viewport" id="main-view">
            <!-- Dynamic Content Injected Here -->
            <div class="loading-state">INITIALIZING NAV SYSTEMS...</div>
        </main>

        <!-- Right Panel: Tactical/Immersive Data -->
        <aside class="right-panel" id="right-panel">
            <div class="panel-header">/// TACTICAL DATA</div>
            <div class="panel-content" id="tactical-display">
                <div class="placeholder-grid">NO TARGET SELECTED</div>
            </div>
        </aside>

        <!-- Bottom: Mission Log -->
        <footer class="console-log" id="mission-log">
            <div class="log-header">/// MISSION LOG ///</div>
            <div class="log-container" id="log-entries">
                <!-- Log entries go here -->
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <!-- Initialize global test mode flag (used by chance-based systems) -->
    <script>window.TEST_MODE = false;</script>
    <script src="src/data/Items.js"></script>
    <script src="src/data/Upgrades.js"></script> <!-- New Upgrades -->
    <script src="src/data/Events.js"></script>
    <script src="src/data/CampfireEvents.js"></script>
    <script src="src/data/ExodusDerelicts.js"></script>
    <script src="src/data/LootTables.js"></script>
    <script src="src/data/SectorConfig.js"></script>
    <script src="src/data/ExodusLogs.js"></script>
    <script src="src/data/FailedColonyEncounters.js"></script>
    <script src="src/data/DerelictEncounters.js"></script>
    <script src="src/data/AnomalyEncounters.js"></script>
    <script src="src/data/LateGamePOIs.js"></script>
    <script src="src/data/StructureEncounter.js"></script>
    <script src="src/data/ShipEvents.js"></script>
    <script src="src/data/SpaceStations.js"></script>
    <script src="src/data/AsteroidFields.js"></script>
    <script src="src/data/DistressSignals.js"></script>
    <script src="src/data/CrewEvents.js"></script>
    <script src="src/systems/ProbeSystem.js"></script>
    <script src="src/systems/AudioSystem.js"></script>
    <script src="src/systems/EndingSystem.js"></script>
    <script src="src/systems/BarkSystem.js"></script>
    <script src="src/systems/AuraSystem.js"></script>
    <script src="src/systems/NarrativeModal.js"></script>
    <script src="src/views/OrbitView.js"></script>
    <script src="src/generators/PlanetGenerator.js"></script>
    <script src="src/views/NavView.js"></script>
    <script src="src/bundle.js"></script>
</body>

</html>